<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>{{ algo }} Analysis | ML Suite</title>
    <style>
        /* Pandas Table Styling */
        .dataframe { width: 100% !important; border-collapse: collapse !important; border: none !important; }
        .dataframe th { background: #f8fafc; color: #64748b; font-weight: 800; padding: 1rem; text-transform: uppercase; font-size: 0.75rem; border-bottom: 2px solid #f1f5f9; text-align: left; }
        .dataframe td { padding: 1rem; border-bottom: 1px solid #f1f5f9; color: #334155; }
        .dataframe tr:hover { background-color: #f1f5f9; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen p-8">
    <div class="max-w-6xl mx-auto">
        <div class="bg-white rounded-[3rem] shadow-2xl p-10 border border-slate-100">
            <div class="flex items-center justify-between mb-12">
                <div>
                    <span class="bg-indigo-100 text-indigo-700 px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest">{{ algo }} Algorithm</span>
                    <h2 class="text-4xl font-black text-slate-800 mt-2">Data Partitioning</h2>
                </div>
                <div class="w-16 h-16 bg-slate-900 text-white rounded-2xl flex items-center justify-center">
                    <i class="fa-solid fa-layer-group text-2xl"></i>
                </div>
            </div>

            <form method="POST" enctype="multipart/form-data" class="grid grid-cols-1 md:grid-cols-4 gap-6 items-end bg-slate-50 p-8 rounded-[2rem] mb-12">
                <div class="md:col-span-2 space-y-2">
                    <label class="text-xs font-bold text-slate-400 uppercase ml-2">Upload Numeric Dataset (CSV)</label>
                    <input type="file" name="dataset" required class="w-full bg-white p-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none">
                </div>
                
                {% if algo == 'KMEANS' %}
                <div class="space-y-2">
                    <label class="text-xs font-bold text-slate-400 uppercase ml-2">Clusters (K)</label>
                    <input type="number" name="k_clusters" value="3" min="2" max="10" class="w-full bg-white p-4 rounded-2xl border border-slate-200">
                </div>
                {% else %}
                <div class="space-y-2 opacity-50">
                    <label class="text-xs font-bold text-slate-400 uppercase ml-2">Method</label>
                    <input type="text" value="Density Based" disabled class="w-full bg-gray-100 p-4 rounded-2xl border border-slate-200 cursor-not-allowed">
                </div>
                {% endif %}

                <button type="submit" class="bg-indigo-600 text-white h-[58px] rounded-2xl font-bold hover:bg-indigo-700 shadow-xl shadow-indigo-100 transition-all flex items-center justify-center gap-2">
                    <i class="fa-solid fa-play text-xs"></i> Execute
                </button>
            </form>

            {% if results %}
            <div class="space-y-6">
                <div class="flex items-center gap-4">
                    <div class="h-2 w-8 bg-indigo-500 rounded-full"></div>
                    <h3 class="text-xl font-bold text-slate-800">Cluster Assignment (Preview)</h3>
                </div>
                <div class="overflow-x-auto rounded-3xl border border-slate-100 shadow-sm bg-white">
                    {{ results | safe }}
                </div>
                <p class="text-slate-400 text-sm italic">* Showing results with the new <strong>Cluster_ID</strong> column.</p>
            </div>
            {% endif %}

            <div class="mt-12 pt-8 border-t border-slate-50 text-center">
                <a href="/" class="text-slate-400 font-bold hover:text-indigo-600 transition-colors">‚Üê Return to Dashboard</a>
            </div>
        </div>
    </div>
</body>
</html>